// Generated by CoffeeScript 1.4.0
(function() {
  var stretches;

  stretches = {
    linear: function(imageData, colorData, pixelMap, min, max) {
      var i, invRange, level;
      console.log(min);
      console.log(max);
      invRange = 1 / (max - min);
      i = imageData.length;
      while (i--) {
        level = ~~(255 * ((imageData[i] - min) * invRange));
        if (level > 255) {
          console.log("overfow");
        }
        colorData[i] = pixelMap[level];
      }
      return void 0;
    },
    log: function(imageData, colorData, pixelMap, min, max) {
      var i, invLN10, invMaxLog, range;
      range = max - min;
      invLN10 = 1 / Math.LN10;
      invMaxLog = 1 / (Math.log(range) * invLN10);
      i = imageData.length;
      while (i--) {
        colorData[i] = pixelMap[~~(255 * ((Math.log(imageData[i] - min + 1) * invLN10) * invMaxLog))];
      }
      return void 0;
    },
    power: function(imageData, colorData, pixelMap, min, max) {
      var i, invMaxPow, range, value;
      range = max - min;
      invMaxPow = 1 / (range * range);
      i = imageData.length;
      while (i--) {
        value = imageData[i] - min;
        colorData[i] = pixelMap[~~(255 * ((value * value) * invMaxPow))];
      }
      return void 0;
    },
    sqrt: function(imageData, colorData, pixelMap, min, max) {
      var i, invMaxSqrt, range;
      range = max - min;
      invMaxSqrt = 1 / Math.sqrt(range);
      i = imageData.length;
      while (i--) {
        colorData[i] = pixelMap[~~(255 * ((Math.sqrt(imageData[i] - min)) * invMaxSqrt))];
      }
      return void 0;
    },
    arcsinh: function(imageData, colorData, pixelMap, min, max) {
      var i, invMaxAsinh, max_asinh, point, range, value;
      range = max - min;
      max_asinh = Math.log(range + Math.sqrt(range * range + 1));
      invMaxAsinh = 1 / max_asinh;
      i = imageData.length;
      while (i--) {
        point = imageData[i] - min;
        value = Math.log(point + Math.sqrt(point * point + 1));
        colorData[i] = pixelMap[~~(255 * (value * invMaxAsinh))];
      }
      return void 0;
    }
  };

  if (typeof module !== "undefined" && module !== null) {
    module.exports = stretches;
  }

}).call(this);
