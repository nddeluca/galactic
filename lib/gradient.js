// Generated by CoffeeScript 1.4.0
(function() {
  var Gradient;

  Gradient = (function() {

    function Gradient() {
      this.max = 255;
      this.buffer = new ArrayBuffer(this.range * 4);
      this.gradient = new Uint32Array(this.buffer);
      this.entries = [];
    }

    Gradient.prototype.add = function(level, intensity) {
      var entry;
      entry = {
        level: level,
        intensity: intensity
      };
      return this.entries.push(entry);
    };

    Gradient.prototype.build = function() {
      var entires, entry1, entry2, i, intensity1, intensity2, invRange, j, level1, level2, value, _results;
      entires = this.entires;
      i = entries.length - 1;
      _results = [];
      while (i--) {
        entry1 = entries[i];
        entry2 = entries[i + 1];
        level1 = entry1.level;
        level2 = entry2.level;
        intensity1 = entry1.intensity;
        intensity2 = entry2.intensity;
        invRange = 1 / (level2 - level1);
        _results.push((function() {
          var _i, _results1;
          _results1 = [];
          for (j = _i = range; range <= 0 ? _i <= 0 : _i >= 0; j = range <= 0 ? ++_i : --_i) {
            _results1.push(value = (intensity2 - intensity1) * j * invRange + intensity1);
          }
          return _results1;
        })());
      }
      return _results;
    };

    return Gradient;

  })();

  this.gradient[level1 + range] = ~~(255 * value);

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Gradient;
  }

}).call(this);
